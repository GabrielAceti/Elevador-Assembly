;EXECUTAR O CODIGO NO MODO FASTER	

	IN	06			;PEGA O VALOR CONTIDO NA PORTA 06 E COPIA PARA AL
	OUT	06			;COPIA O VALOR DE AL PARA A PORTA 06		

	CMP	AL,04			;VERIFICA SE O ELEVADOR ESTÁ NO ALTO	
	JZ	TEST2

	CMP	AL,08			;VERIFICA SE O ELEVADOR ESTÁ NO TERREO
	JZ	LOOP
LOOP:	
	IN	06			;PEGA O VALOR DA PORTA 06 E COPIA PARA AL
	CMP	AL,18			;VERIFICA SE O BOTAO DE DESCER NÃO FOI APERTADO ENQUANTO O ELEVADOR JA ESTA NO TERREO
	JZ	FIXFLOORSTATIC		;CASO O BOTAO DE DESCER TENHA SIDO APERTADO, CORRIGE O CODIGO
	CMP 	AL,28			;VERIFICA SE O BOTAO DE SUBIR FOI APERTADO
	JNZ	LOOP			;CASO A SUBIDA NAO TENHA SIDO PRESSIONADA, REFAZ O PROCESSO

UP:
	OR      AL,01			;SOBE O ELEVADOR
	OUT	06
TEST:
	IN	06			;RECEBE O VALOR CONTIDO NA PORTA 06 E COPIA PARA AL
	CMP	AL,31			;VERIFICA SE O BOTAO DE DESCER NAO FOI APERTADO ENQUANTO O ELEVADOR ESTA SUBINDO
	JZ	FIXUP			;CASO O BOTAO TENHA SIDO APERTADO, CORRIGE O CODIGO
	CMP	AL,25			;VERIFICA SE O ELEVADOR CHEGOU NO ULTIMO ANDAR
	JNZ	TEST			;CASO NAO TENHA CHEGADO, REFAZ A FUNCAO

	AND	AL,04			;DESLIGA A SUBIDA E DESLIGA O BOTAO DE SUBIR
	OUT	06
TEST2:
	IN	06			;RECEBE O VALOR CONTIDO NA PORTA 06 E COPIA PARA AL
	CMP	AL,24			;VERIFICA SE O BOTAO DE SUBIR FOI APERTADO ENQUANTO O ELEVADOR ESTA NO ULTIMO ANDAR
	JZ	FIXROOFSTATIC		;CASO O BOTAO DE SUBIR TENHA SIDO APERTADO, CORRIGE O CODIGO
	CMP	AL,14			;VERIFICA SE O BOTAO DE DESCER FOI APERTADO
	JNZ	TEST2			;CASO O BOTAO DE DESCIDA NAO TENHA SIDO APERTADO, REFAZ A FUNCAO
DOWN:
	OR	AL,02			;DESCE O ELEVADOR
	OUT	06
TEST3:
	IN	06			;RECEBE O VALOR CONTIDO NA PORTA 06 E COPIA PARA AL	
	CMP	AL,32			;VERIFICA SE O BOTAO DE SUBIRNAO FOI APERTADO ENQUANTO O ELEVADOR ESTA DESCENDO
	JZ	FIXDOWN			;CASO O BOTAO TENHA SIDO APERTADO, CORRIGE O CODIGO
	CMP	AL,1A			;VERIFICA SE O ELEVADOR CHEGOU NO TERREO
	JNZ	TEST3			;CASO NAO TENHA CHEGADO, REFAZ A FUNCAO
	
	AND	AL,2D			;DESLIGA A DESCIDAE DESLIGA O BOTAO DE DESCER
	OUT	06

	JMP	LOOP			;RETORNA PARA O INICIO DO CODIGO PARA REFAZER AS FUNCOES

FIXFLOORSTATIC:
	AND	AL,2F			;CORRECAO DO CODIGO PARA QUANDO O BOTAO DE DESCIDA FOR APERTADO COM O ELEVADOR NO TERREO
	OUT	06
	JMP	LOOP

FIXROOFSTATIC:
	AND	AL,1F			;CORRECAO DO CODIGO PARA QUANDO O BOTAO DE SUBIDAFOR APERTADO COM O ELEVADOR NO ULTIMO ANDAR
	OUT	06
	JMP	TEST2

FIXUP:
	AND	AL,2F			;CORRECAO DO CODIGO PARA QUANDO O BOTAO DE DESCIDA FOR APERTADO COM O ELEVADOR SUBINDO
	OUT	06
	JMP	TEST

FIXDOWN:
	AND	AL,1F			;CORRECAO DO CODIGO PARA QUANDO O BOTAO DE SUBIDA FOR APERTADO COM O ELEVADOR DESCENDO
	OUT	06
	JMP	TEST3
	
	
END